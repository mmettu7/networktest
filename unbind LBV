---
- name: Check LBVserver bound to CSVserver on Netscaler
  hosts: netscaler
  gather_facts: no

  tasks:
    - name: Get LBVserver bindings
      delegate_to: localhost
      netscaler_nitro_request:
        host: "{{ netscaler_ip }}"
        username: "{{ netscaler_username }}"
        password: "{{ netscaler_password }}"
        operation: get
        resource: lbvserver_binding.lbvserver_binding
        filter: "name:{{ lbvserver_name }}"
      register: lbvserver_bindings

    - debug:
        msg: "{{ lbvserver_bindings }}"

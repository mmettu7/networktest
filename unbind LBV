---
- name: Check LBVserver bindings on Netscaler
  hosts: netscaler
  gather_facts: no
  vars:
    netscaler_host: "your_netscaler_host"
    netscaler_username: "your_username"
    netscaler_password: "your_password"
  tasks:
    - name: Get LBVserver bindings
      uri:
        url: "http://{{ netscaler_host }}/nitro/v1/config/lbvserver_binding"
        method: GET
        user: "{{ netscaler_username }}"
        password: "{{ netscaler_password }}"
        body_format: json
        status_code: 200
        validate_certs: no
      register: lbvserver_bindings

    - name: Display LBVserver bindings
      debug:
        msg: "LBVserver {{ item.lbvserver_name }} is bound to CSVserver {{ item.csvserver_name }}"
      loop: "{{ lbvserver_bindings.json.lbvserver_binding }}"
